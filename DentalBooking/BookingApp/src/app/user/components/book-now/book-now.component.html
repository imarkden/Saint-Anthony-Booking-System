<div class="overflow-hidden">
  <div class="book-banner">
    <div class="bg-dark ">
      <img src="../../../../assets/book-now.png" alt="BookBanner" width="100%">
    </div>
  </div>

  <div class="bgwhite">
    <br><br><br><br><br>
    <div class="container">
      <div class="body d-flex flex-wrap justify-content-center">
          <div class="flex-column">
              <div class="home__body-info d-flex justify-content-center text-center">
                  <p style="font-size: 16px;" class="fw-bold lh-1">Love conquers all things, except poverty and toothache.</p>
               </div>
               <div class="home__body-title d-flex justify-content-center">
                   <p class="lh-1">OPEN MONDAY TO SUNDAY</p>
               </div>
               <div class="home__body-info d-flex justify-content-center">
                <p style="font-size: 20px;" class="fw-bold lh-1">From 10:00 AM to 09:00 PM</p>
             </div>
             <div class="home__body-info d-flex justify-content-center">
              <button class="btn btn-info" data-bs-toggle="modal" data-bs-target="#viewServiceModal" data-bs-backdrop="static" data-bs-keyboard="false">View our prices</button>
           </div>
          </div>
      </div>
      <br>
    </div>
    <br><br><br><br><br>
  </div>

<!--Service Modal-->
<div class="modal fade" id="viewServiceModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Service List</h5>
        <button type="button" id="closeModal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table class="table table-hover table-striped">
          <thead>
            <tr>
              <th class="col-1">Service Name</th>
              <th class="col-1">Basic Amount</th>
            </tr>
          </thead>
          <tbody id="serviceList">
            <tr *ngFor="let patient of services">
              <td>{{ patient.name }}</td>
              <td>{{ patient.cost }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button id="closeModal" data-bs-dismiss="modal" type="button" class="btn btn-secondary w-100" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
  
  <div class="mt-5 cnt">
    <div class="flex-container">
      <div class="d-flex flex-wrap justify-content-between">
        <div class="flex-item shadow padding mb-5 bg-body-tertiary rounded bgwhite mobile">
          <form id="addBookForm" (ngSubmit)="addBook()" [formGroup]="bookForm">
            
            <div class="form-group pt-3" [class.error]="bookForm.controls['name'].dirty && bookForm.hasError('required', 'name')">
              <label class="fw-bold">Name</label>
              <div class="input-field">
                <div class="icon-container">
                  <i class="fa fa-user p-2"></i>
                </div>
                <input formControlName="name" type="text" placeholder="Name" class="w-100">
              </div>
              <small *ngIf="bookForm.controls['name'].dirty && bookForm.hasError('required','name')" class="text-danger">Name is required.</small>
              <small *ngIf="bookForm.controls['name'].dirty && bookForm.hasError('pattern','name')" class="text-danger">Name only accept letters.</small>   
            </div>
      
            <div class="form-group pt-3" [class.error]="bookForm.controls['phone'].dirty && bookForm.hasError('required', 'phone')">
              <label class="fw-bold">Phone</label>
              <div class="input-field">
                <div class="icon-container">
                  <i class="fa fa-phone p-2"></i>
                </div>
                <input formControlName="phone" type="tel" placeholder="Phone" class="w-100">
              </div>
              <small *ngIf="bookForm.controls['phone'].dirty && bookForm.hasError('phoneInvalid', 'phone')" class="text-danger">Phone must start with '+63' and be followed by 10 digits.</small>
              <small *ngIf="bookForm.controls['phone'].dirty && bookForm.hasError('required', 'phone')" class="text-danger">Phone is required.</small>
            </div>
                
            <div class="form-group pt-3" [class.error]="bookForm.controls['age'].dirty && bookForm.hasError('required', 'age')">
              <label class="fw-bold">Age</label>
              <div class="input-field">
                <div class="icon-container">
                  <i class="fa fa-hashtag p-2"></i>
                </div>
                <input formControlName="age" type="text" placeholder="Age" class="w-100">
              </div>
              <small *ngIf="bookForm.controls['age'].dirty && bookForm.hasError('required','age')" class="text-danger">Age is required.</small>
              <small *ngIf="bookForm.controls['age'].dirty && bookForm.hasError('pattern','age')" class="text-danger">Age only accept numbers.</small>
            </div>
      
            <div class="form-group pt-3" [class.error]="bookForm.controls['service'].dirty && bookForm.hasError('required', 'service')">
              <label for="service-select" class="fw-bold">Service</label>
              <div class="input-field">
                <div class="icon-container">
                  <i class="fa fa-tooth p-2"></i>
                </div>
                <input formControlName="service" type="text" placeholder="Service" class="w-100 disabled" [(ngModel)]="selectedService" [disabled]="true">
                <select formControlName="service" id="service-select" [(ngModel)]="selectedService">
                  <option value="">Select service</option>
                  <option *ngFor="let service of services" [value]="service.name">{{ service.name }}</option>
                </select>
              </div>
              <small *ngIf="bookForm.controls['service'].dirty && bookForm.hasError('required','service')" class="text-danger">Service is required.</small>
            </div>
      
            <div class="form-group pt-3" [class.error]="bookForm.controls['selectedDate'].dirty && bookForm.hasError('required', 'selectedDate')">
              <label class="fw-bold">Select a Date</label>
              <div class="input-field">
                <div class="icon-container">
                  <i class="fa fa-calendar p-2"></i>
                </div>
                <input type="date" [min]="minDateString" id="selectedDate" formControlName="selectedDate" (change)="fetchGuests()" (change)="updateSelectedDate($event)">
              </div>
              <small *ngIf="bookForm.controls['selectedDate'].dirty && bookForm.hasError('required', 'selectedDate')" class="text-danger">Please select a date.</small>
            </div>
      
            <div class="form-group pt-3" [class.error]="bookForm.controls['selectedTime'].dirty && bookForm.hasError('required', 'selectedTime') && hasConflict()">
              <label class="fw-bold">Select a Time</label>
              <div class="input-field">
                <div class="icon-container">
                  <i class="fa fa-clock p-2"></i>
                </div>
                <input type="text" placeholder="HH:mm" formControlName="selectedTime" class="w-100" [(ngModel)]="selectedTime" readonly>
                <select id="selectedTime" formControlName="selectedTime" [(ngModel)]="selectedTime" class="w-50">
                  <option value="" selected>Select time</option>
                  <ng-container *ngFor="let hour of hours">
                    <ng-container *ngFor="let minute of minutes">
                      <ng-container *ngIf="!isTimeDisabled(hour + ':' + minute)">
                        <option [value]="hour + ':' + minute">{{ hour + ':' + minute }}</option>
                      </ng-container>
                    </ng-container>
                  </ng-container>
                </select>
              </div>
              <small *ngIf="bookForm.controls['selectedTime'].dirty && bookForm.hasError('required', 'selectedTime')" class="text-danger">
                Please select a time.
              </small>
              <small *ngIf="hasConflict()" class="text-danger">
                This time slot is already booked.
              </small>
            </div>
            <button type="submit" class="btn btn-primary w-100 mt-4" [disabled]="isSubmitDisabled()" (change)="getAllGuests()">Submit</button>
          </form>
        </div>

        <div class="flex-item shadow padding mb-5 bg-body-tertiary rounded bgwhite mobile2">
          <label for="" [(ngModel)]="selectedDate"></label>
          <table class="time-table table">
            <thead>
              <tr>
                <th>{{displayDate}}</th>
                <th *ngFor="let minute of minutes">{{ "00:" + minute }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let hour of hours">
                <th scope="row">{{ hour + ":00" }}</th>
                <td *ngFor="let minute of minutes" [ngClass]="{ 'table-success': isTimeAvailable(hour, minute), 'table-danger': !isTimeAvailable(hour, minute) }">
                  {{ isTimeAvailable(hour, minute) ? 'Available' : 'Unavailable' }}
                </td>
              </tr>
            </tbody>
          </table>  
        </div>
      </div>
    </div>
  </div>
</div>

<div class="bgwhite">
  <br><br><br><br><br>
  <div class="container">
    <div class="body d-flex flex-wrap justify-content-center">
        <div class="flex-column">
            <div class="home__body-info d-flex justify-content-center text-center">
                <p style="font-size: 16px;" class="fw-bold lh-1">A good dentist never gets on your nerves.</p>
             </div>
             <div class="home__body-title d-flex justify-content-center fontSize">
              <span class="text-dark fs-4 fw-bold fontSize" style="font-family: 'Tapestry', cursive;">Saint Anthony <label style="font-family: 'Rubik Maze', cursive; font-weight: 400;" class="hid">| Dental Clinic</label></span>        
             </div>
             <div class="home__body-info d-flex justify-content-center text-center">
              <p style="font-size: 16px;" class="fw-bold lh-1">See you soon!</p>
            </div>
        </div>
    </div>
    <br>
  </div>
  <br><br><br><br><br>
</div>